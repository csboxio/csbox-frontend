import{g as p}from"./config-89008b4d.js";import{i as b,a as g,b as y}from"./index-2bc87171.js";function m(s){const{supabaseUrl:t,supabaseKey:o,options:e,globalInstance:n}=p();return b()?n:g(t,o,{...e,auth:{autoRefreshToken:!1,storage:{async getItem(u){var c;let a=null;if(typeof((c=s.data)==null?void 0:c.session)<"u")a=s.data.session;else{const r=await s.parent();a=r==null?void 0:r.session}return a?JSON.stringify(a):null},removeItem(u){},setItem(u,a){}}}})}const l=Symbol("supabase-client");function _(s){const{cookies:t,request:o}=s,e=s.locals;if(e[l])return e[l];const{supabaseUrl:n,supabaseKey:u,options:a,cookieOptions:c}=p(),r=y({supabaseUrl:n,supabaseKey:u,getCookie(i){return t.get(i)},setCookie(i,f,d){t.set(i,f,d)},getRequestHeader(i){return o.headers.get(i)??void 0},options:a,cookieOptions:c});return e[l]=r,r}async function C(s){const t=s,o=s;let e;if(typeof o.depends=="function"&&o.depends("supabase:auth"),t.locals)e=_(t);else if(typeof o.parent=="function")e=m(o);else throw new Error("invalid event");const{data:{session:n}}=await e.auth.getSession();return{supabaseClient:e,session:n}}const S=async s=>{const{session:t,supabaseClient:o}=await C(s);if(t){const{data:e,error:n}=await o.from("courses").select("id, course_image_url, course_title, course_prefix, course_number, course_term").eq("created_by",t.user.id);return{courseData:e}}},h=Object.freeze(Object.defineProperty({__proto__:null,load:S},Symbol.toStringTag,{value:"Module"}));export{h as _,S as l};
