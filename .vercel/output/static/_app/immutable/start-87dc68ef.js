import{S as ot,i as it,s as st,a as lt,e as H,c as ct,b as G,g as pe,t as J,d as he,f as K,h as M,j as ft,o as Oe,k as ut,l as dt,m as pt,n as ke,p as C,q as ht,r as mt,u as _t,v as X,w as Y,x as $e,y as Q,z as Z,A as ue}from"./chunks/index-28f47c29.js";import{S as tt,I as N,g as Be,f as Ge,a as Re,b as de,s as F,i as We,c as ne,P as Xe,d as gt,e as wt,h as yt,j as vt}from"./chunks/singletons-3f3bf73b.js";import{_ as V}from"./chunks/index-2bc87171.js";import"./chunks/supabaseClient-70197f8c.js";import{u as bt}from"./chunks/parse-b67c4dc9.js";function Et(r,e){return r==="/"||e==="ignore"?r:e==="never"?r.endsWith("/")?r.slice(0,-1):r:e==="always"&&!r.endsWith("/")?r+"/":r}function kt(r){return r.split("%25").map(decodeURI).join("%25")}function Rt(r){for(const e in r)r[e]=decodeURIComponent(r[e]);return r}const St=["href","pathname","search","searchParams","toString","toJSON"];function Lt(r,e){const t=new URL(r);for(const s of St){let l=t[s];Object.defineProperty(t,s,{get(){return e(),l},enumerable:!0,configurable:!0})}return Pt(t),t}function Pt(r){Object.defineProperty(r,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const At="/__data.json";function Ot(r){return r.replace(/\/$/,"")+At}function It(...r){let e=5381;for(const t of r)if(typeof t=="string"){let s=t.length;for(;s;)e=e*33^t.charCodeAt(--s)}else if(ArrayBuffer.isView(t)){const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);let l=s.length;for(;l;)e=e*33^s[--l]}else throw new TypeError("value must be a string or TypedArray");return(e>>>0).toString(36)}const me=window.fetch;window.fetch=(r,e)=>((r instanceof Request?r.method:(e==null?void 0:e.method)||"GET")!=="GET"&&re.delete(Te(r)),me(r,e));const re=new Map;function Ut(r,e){const t=Te(r,e),s=document.querySelector(t);if(s!=null&&s.textContent){const{body:l,...h}=JSON.parse(s.textContent),a=s.getAttribute("data-ttl");return a&&re.set(t,{body:l,init:h,ttl:1e3*Number(a)}),Promise.resolve(new Response(l,h))}return me(r,e)}function $t(r,e,t){if(re.size>0){const s=Te(r,t),l=re.get(s);if(l){if(performance.now()<l.ttl&&["default","force-cache","only-if-cached",void 0].includes(t==null?void 0:t.cache))return new Response(l.body,l.init);re.delete(s)}}return me(e,t)}function Te(r,e){let s=`script[data-sveltekit-fetched][data-url=${JSON.stringify(r instanceof Request?r.url:r)}]`;if(e!=null&&e.headers||e!=null&&e.body){const l=[];e.headers&&l.push([...new Headers(e.headers)].join(",")),e.body&&(typeof e.body=="string"||ArrayBuffer.isView(e.body))&&l.push(e.body),s+=`[data-hash="${It(...l)}"]`}return s}const Tt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Dt(r){const e=[];return{pattern:r==="/"?/^\/$/:new RegExp(`^${xt(r).map(s=>{const l=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(s);if(l)return e.push({name:l[1],matcher:l[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const h=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(s);if(h)return e.push({name:h[1],matcher:h[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!s)return;const a=s.split(/\[(.+?)\](?!\])/);return"/"+a.map((g,w)=>{if(w%2){if(g.startsWith("x+"))return Se(String.fromCharCode(parseInt(g.slice(2),16)));if(g.startsWith("u+"))return Se(String.fromCharCode(...g.slice(2).split("-").map(P=>parseInt(P,16))));const b=Tt.exec(g);if(!b)throw new Error(`Invalid param: ${g}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,S,k,T,x]=b;return e.push({name:T,matcher:x,optional:!!S,rest:!!k,chained:k?w===1&&a[0]==="":!1}),k?"(.*?)":S?"([^/]*)?":"([^/]+?)"}return Se(g)}).join("")}).join("")}/?$`),params:e}}function jt(r){return!/^\([^)]+\)$/.test(r)}function xt(r){return r.slice(1).split("/").filter(jt)}function Nt(r,e,t){const s={},l=r.slice(1);let h=0;for(let a=0;a<e.length;a+=1){const d=e[a],g=l[a-h];if(d.chained&&d.rest&&h){s[d.name]=l.slice(a-h,a+1).filter(w=>w).join("/"),h=0;continue}if(g===void 0){d.rest&&(s[d.name]="");continue}if(!d.matcher||t[d.matcher](g)){s[d.name]=g;continue}if(d.optional&&d.chained){h++;continue}return}if(!h)return s}function Se(r){return r.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function Vt(r,e,t,s){const l=new Set(e);return Object.entries(t).map(([d,[g,w,b]])=>{const{pattern:S,params:k}=Dt(d),T={id:d,exec:x=>{const P=S.exec(x);if(P)return Nt(P,k,s)},errors:[1,...b||[]].map(x=>r[x]),layouts:[0,...w||[]].map(a),leaf:h(g)};return T.errors.length=T.layouts.length=Math.max(T.errors.length,T.layouts.length),T});function h(d){const g=d<0;return g&&(d=~d),[g,r[d]]}function a(d){return d===void 0?d:[l.has(d),r[d]]}}function Ct(r){let e,t,s;var l=r[0][0];function h(a){return{props:{data:a[2],form:a[1]}}}return l&&(e=X(l,h(r))),{c(){e&&Y(e.$$.fragment),t=H()},l(a){e&&$e(e.$$.fragment,a),t=H()},m(a,d){e&&Q(e,a,d),G(a,t,d),s=!0},p(a,d){const g={};if(d&4&&(g.data=a[2]),d&2&&(g.form=a[1]),l!==(l=a[0][0])){if(e){pe();const w=e;J(w.$$.fragment,1,0,()=>{Z(w,1)}),he()}l?(e=X(l,h(a)),Y(e.$$.fragment),K(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else l&&e.$set(g)},i(a){s||(e&&K(e.$$.fragment,a),s=!0)},o(a){e&&J(e.$$.fragment,a),s=!1},d(a){a&&M(t),e&&Z(e,a)}}}function qt(r){let e,t,s;var l=r[0][0];function h(a){return{props:{data:a[2],$$slots:{default:[Ft]},$$scope:{ctx:a}}}}return l&&(e=X(l,h(r))),{c(){e&&Y(e.$$.fragment),t=H()},l(a){e&&$e(e.$$.fragment,a),t=H()},m(a,d){e&&Q(e,a,d),G(a,t,d),s=!0},p(a,d){const g={};if(d&4&&(g.data=a[2]),d&523&&(g.$$scope={dirty:d,ctx:a}),l!==(l=a[0][0])){if(e){pe();const w=e;J(w.$$.fragment,1,0,()=>{Z(w,1)}),he()}l?(e=X(l,h(a)),Y(e.$$.fragment),K(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else l&&e.$set(g)},i(a){s||(e&&K(e.$$.fragment,a),s=!0)},o(a){e&&J(e.$$.fragment,a),s=!1},d(a){a&&M(t),e&&Z(e,a)}}}function Ft(r){let e,t,s;var l=r[0][1];function h(a){return{props:{data:a[3],form:a[1]}}}return l&&(e=X(l,h(r))),{c(){e&&Y(e.$$.fragment),t=H()},l(a){e&&$e(e.$$.fragment,a),t=H()},m(a,d){e&&Q(e,a,d),G(a,t,d),s=!0},p(a,d){const g={};if(d&8&&(g.data=a[3]),d&2&&(g.form=a[1]),l!==(l=a[0][1])){if(e){pe();const w=e;J(w.$$.fragment,1,0,()=>{Z(w,1)}),he()}l?(e=X(l,h(a)),Y(e.$$.fragment),K(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else l&&e.$set(g)},i(a){s||(e&&K(e.$$.fragment,a),s=!0)},o(a){e&&J(e.$$.fragment,a),s=!1},d(a){a&&M(t),e&&Z(e,a)}}}function Ye(r){let e,t=r[5]&&Qe(r);return{c(){e=ut("div"),t&&t.c(),this.h()},l(s){e=dt(s,"DIV",{id:!0,"aria-live":!0,"aria-atomic":!0,style:!0});var l=pt(e);t&&t.l(l),l.forEach(M),this.h()},h(){ke(e,"id","svelte-announcer"),ke(e,"aria-live","assertive"),ke(e,"aria-atomic","true"),C(e,"position","absolute"),C(e,"left","0"),C(e,"top","0"),C(e,"clip","rect(0 0 0 0)"),C(e,"clip-path","inset(50%)"),C(e,"overflow","hidden"),C(e,"white-space","nowrap"),C(e,"width","1px"),C(e,"height","1px")},m(s,l){G(s,e,l),t&&t.m(e,null)},p(s,l){s[5]?t?t.p(s,l):(t=Qe(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&M(e),t&&t.d()}}}function Qe(r){let e;return{c(){e=ht(r[6])},l(t){e=mt(t,r[6])},m(t,s){G(t,e,s)},p(t,s){s&64&&_t(e,t[6])},d(t){t&&M(e)}}}function Ht(r){let e,t,s,l,h;const a=[qt,Ct],d=[];function g(b,S){return b[0][1]?0:1}e=g(r),t=d[e]=a[e](r);let w=r[4]&&Ye(r);return{c(){t.c(),s=lt(),w&&w.c(),l=H()},l(b){t.l(b),s=ct(b),w&&w.l(b),l=H()},m(b,S){d[e].m(b,S),G(b,s,S),w&&w.m(b,S),G(b,l,S),h=!0},p(b,[S]){let k=e;e=g(b),e===k?d[e].p(b,S):(pe(),J(d[k],1,1,()=>{d[k]=null}),he(),t=d[e],t?t.p(b,S):(t=d[e]=a[e](b),t.c()),K(t,1),t.m(s.parentNode,s)),b[4]?w?w.p(b,S):(w=Ye(b),w.c(),w.m(l.parentNode,l)):w&&(w.d(1),w=null)},i(b){h||(K(t),h=!0)},o(b){J(t),h=!1},d(b){d[e].d(b),b&&M(s),w&&w.d(b),b&&M(l)}}}function Jt(r,e,t){let{stores:s}=e,{page:l}=e,{components:h}=e,{form:a}=e,{data_0:d=null}=e,{data_1:g=null}=e;ft(s.page.notify);let w=!1,b=!1,S=null;return Oe(()=>{const k=s.page.subscribe(()=>{w&&(t(5,b=!0),t(6,S=document.title||"untitled page"))});return t(4,w=!0),k}),r.$$set=k=>{"stores"in k&&t(7,s=k.stores),"page"in k&&t(8,l=k.page),"components"in k&&t(0,h=k.components),"form"in k&&t(1,a=k.form),"data_0"in k&&t(2,d=k.data_0),"data_1"in k&&t(3,g=k.data_1)},r.$$.update=()=>{r.$$.dirty&384&&s.page.set(l)},[h,a,d,g,w,b,S,s,l]}class Kt extends ot{constructor(e){super(),it(this,e,Jt,Ht,st,{stores:7,page:8,components:0,form:1,data_0:2,data_1:3})}}const Mt={},_e=[()=>V(()=>import("./chunks/0-eaf61b2a.js"),["./chunks/0-eaf61b2a.js","./components/pages/_layout.svelte-aef982fd.js","./chunks/index-28f47c29.js","./chunks/supabaseClient-70197f8c.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./chunks/config-89008b4d.js","./chunks/singletons-3f3bf73b.js","./chunks/navigation-71f41e52.js","./assets/_layout-99dda395.css"],import.meta.url),()=>V(()=>import("./chunks/1-b8069981.js"),["./chunks/1-b8069981.js","./components/pages/_error.svelte-32527474.js","./chunks/index-28f47c29.js","./chunks/stores-554860e7.js","./chunks/singletons-3f3bf73b.js","./chunks/navigation-71f41e52.js"],import.meta.url),()=>V(()=>import("./chunks/2-a01481c4.js"),["./chunks/2-a01481c4.js","./chunks/_page-6fbdd880.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./chunks/index-c4ca6160.js","./components/pages/_page.svelte-f87e2247.js","./chunks/index-28f47c29.js","./chunks/stores-554860e7.js","./chunks/singletons-3f3bf73b.js","./chunks/Auth-6e4f9bc6.js","./chunks/supabaseClient-70197f8c.js","./chunks/config-89008b4d.js","./chunks/Avatar-447ff616.js","./chunks/imageStorage-9229b8d0.js","./chunks/navigation-71f41e52.js"],import.meta.url),()=>V(()=>import("./chunks/3-85cc784d.js"),["./chunks/3-85cc784d.js","./chunks/_page-da0d156f.js","./components/pages/dashboard/_page.svelte-8d79f22c.js","./chunks/index-28f47c29.js","./chunks/stores-554860e7.js","./chunks/singletons-3f3bf73b.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./chunks/Navbar-a975f0de.js","./chunks/supabaseClient-70197f8c.js","./chunks/config-89008b4d.js","./chunks/navigation-71f41e52.js","./chunks/index-9df2dffa.js","./assets/index-95b16411.css"],import.meta.url),()=>V(()=>import("./chunks/4-6a3c3434.js"),["./chunks/4-6a3c3434.js","./chunks/_page-9186a660.js","./chunks/config-89008b4d.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./components/pages/dashboard/courses/_page.svelte-040c20a9.js","./chunks/index-28f47c29.js","./chunks/Navbar-a975f0de.js","./chunks/supabaseClient-70197f8c.js","./chunks/singletons-3f3bf73b.js","./chunks/navigation-71f41e52.js","./chunks/stores-554860e7.js","./chunks/index-9df2dffa.js","./assets/index-95b16411.css"],import.meta.url),()=>V(()=>import("./chunks/5-2f5b0290.js"),["./chunks/5-2f5b0290.js","./components/pages/dashboard/courses/_slug_/_page.svelte-3ecf1c87.js","./chunks/index-28f47c29.js","./chunks/Navbar-a975f0de.js","./chunks/supabaseClient-70197f8c.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./chunks/config-89008b4d.js","./chunks/singletons-3f3bf73b.js","./chunks/navigation-71f41e52.js","./chunks/stores-554860e7.js","./chunks/index-9df2dffa.js","./assets/index-95b16411.css"],import.meta.url),()=>V(()=>import("./chunks/6-28736646.js"),["./chunks/6-28736646.js","./chunks/_page-ed77219c.js","./components/pages/dashboard/courses/create/_page.svelte-92d359c8.js","./chunks/index-28f47c29.js","./chunks/stores-554860e7.js","./chunks/singletons-3f3bf73b.js","./chunks/imageStorage-9229b8d0.js","./chunks/supabaseClient-70197f8c.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./chunks/config-89008b4d.js","./chunks/navigation-71f41e52.js","./chunks/parse-b67c4dc9.js","./chunks/index-c4ca6160.js","./chunks/index-9df2dffa.js","./assets/index-95b16411.css"],import.meta.url),()=>V(()=>import("./chunks/7-a6bbe7ec.js"),["./chunks/7-a6bbe7ec.js","./chunks/_page-fd0317d0.js","./components/pages/dashboard/profile/_page.svelte-96e77df1.js","./chunks/index-28f47c29.js","./chunks/stores-554860e7.js","./chunks/singletons-3f3bf73b.js","./chunks/Avatar-447ff616.js","./chunks/imageStorage-9229b8d0.js","./chunks/supabaseClient-70197f8c.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./chunks/config-89008b4d.js","./chunks/navigation-71f41e52.js"],import.meta.url),()=>V(()=>import("./chunks/8-a204c799.js"),["./chunks/8-a204c799.js","./components/pages/login/_page.svelte-8361d016.js","./chunks/index-28f47c29.js","./chunks/stores-554860e7.js","./chunks/singletons-3f3bf73b.js","./chunks/Auth-6e4f9bc6.js","./chunks/supabaseClient-70197f8c.js","./chunks/index-2bc87171.js","./chunks/browser-ponyfill-10e9505f.js","./chunks/config-89008b4d.js","./chunks/Avatar-447ff616.js","./chunks/imageStorage-9229b8d0.js","./chunks/navigation-71f41e52.js"],import.meta.url),()=>V(()=>import("./chunks/9-9373ce95.js"),["./chunks/9-9373ce95.js","./components/pages/register/_page.svelte-2659da6e.js","./chunks/index-28f47c29.js"],import.meta.url)],at=[0],zt={"/":[-3],"/dashboard":[3],"/dashboard/courses":[4],"/dashboard/courses/create":[6],"/dashboard/courses/[slug]":[-6],"/dashboard/profile":[7],"/login":[8],"/register":[9]},Bt={handleError:({error:r})=>{console.error(r)}};let Ie=class{constructor(e,t){this.status=e,typeof t=="string"?this.body={message:t}:t?this.body=t:this.body={message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}},Ze=class{constructor(e,t){this.status=e,this.location=t}};async function Gt(r){var e;for(const t in r)if(typeof((e=r[t])==null?void 0:e.then)=="function")return Object.fromEntries(await Promise.all(Object.entries(r).map(async([s,l])=>[s,await l])));return r}function Wt(r){return r.filter(e=>e!=null)}const Le=Vt(_e,at,zt,Mt),nt=_e[0],Ue=_e[1];nt();Ue();let W={};try{W=JSON.parse(sessionStorage[tt])}catch{}function Pe(r){W[r]=ne()}function Xt({target:r,base:e}){var Ke;const t=document.documentElement,s=[];let l=null;const h={before_navigate:[],after_navigate:[]};let a={branch:[],error:null,url:null},d=!1,g=!1,w=!0,b=!1,S=!1,k=!1,T=!1,x,P=(Ke=history.state)==null?void 0:Ke[N];P||(P=Date.now(),history.replaceState({...history.state,[N]:P},"",location.href));const ge=W[P];ge&&(history.scrollRestoration="manual",scrollTo(ge.x,ge.y));let z,De,oe;async function je(){oe=oe||Promise.resolve(),await oe,oe=null;const n=new URL(location.href),o=le(n,!0);l=null,await Ne(o,n,[])}async function we(n,{noScroll:o=!1,replaceState:c=!1,keepFocus:i=!1,state:u={},invalidateAll:f=!1},p,y){return typeof n=="string"&&(n=new URL(n,Be(document))),fe({url:n,scroll:o?ne():null,keepfocus:i,redirect_chain:p,details:{state:u,replaceState:c},nav_token:y,accepted:()=>{f&&(T=!0)},blocked:()=>{},type:"goto"})}async function xe(n){const o=le(n,!1);if(!o)throw new Error(`Attempted to preload a URL that does not belong to this app: ${n}`);return l={id:o.id,promise:qe(o).then(c=>(c.type==="loaded"&&c.state.error&&(l=null),c))},l.promise}async function ie(...n){const c=Le.filter(i=>n.some(u=>i.exec(u))).map(i=>Promise.all([...i.layouts,i.leaf].map(u=>u==null?void 0:u[1]())));await Promise.all(c)}async function Ne(n,o,c,i,u={},f){var y,_;De=u;let p=n&&await qe(n);if(p||(p=await Je(o,{id:null},await ae(new Error(`Not found: ${o.pathname}`),{url:o,params:{},route:{id:null}}),404)),o=(n==null?void 0:n.url)||o,De!==u)return!1;if(p.type==="redirect")if(c.length>10||c.includes(o.pathname))p=await se({status:500,error:await ae(new Error("Redirect loop"),{url:o,params:{},route:{id:null}}),url:o,route:{id:null}});else return we(new URL(p.location,o).href,{},[...c,o.pathname],u),!1;else((_=(y=p.props)==null?void 0:y.page)==null?void 0:_.status)>=400&&await F.updated.check()&&await te(o);if(s.length=0,T=!1,b=!0,i&&i.details){const{details:m}=i,E=m.replaceState?0:1;m.state[N]=P+=E,history[m.replaceState?"replaceState":"pushState"](m.state,"",o)}if(l=null,g?(a=p.state,p.props.page&&(p.props.page.url=o),x.$set(p.props)):Ve(p),i){const{scroll:m,keepfocus:E}=i,{activeElement:O}=document;await ue();const D=document.activeElement!==O&&document.activeElement!==document.body;if(!E&&!D&&await Ae(),w){const L=o.hash&&document.getElementById(decodeURIComponent(o.hash.slice(1)));m?scrollTo(m.x,m.y):L?L.scrollIntoView():scrollTo(0,0)}}else await ue();w=!0,p.props.page&&(z=p.props.page),f&&f(),b=!1}function Ve(n){var i;a=n.state;const o=document.querySelector("style[data-sveltekit]");o&&o.remove(),z=n.props.page,x=new Kt({target:r,props:{...n.props,stores:F},hydrate:!0});const c={from:null,to:{params:a.params,route:{id:((i=a.route)==null?void 0:i.id)??null},url:new URL(location.href)},willUnload:!1,type:"enter"};h.after_navigate.forEach(u=>u(c)),g=!0}async function ee({url:n,params:o,branch:c,status:i,error:u,route:f,form:p}){let y="never";for(const L of c)(L==null?void 0:L.slash)!==void 0&&(y=L.slash);n.pathname=Et(n.pathname,y),n.search=n.search;const _={type:"loaded",state:{url:n,params:o,branch:c,error:u,route:f},props:{components:Wt(c).map(L=>L.node.component)}};p!==void 0&&(_.props.form=p);let m={},E=!z,O=0;for(let L=0;L<Math.max(c.length,a.branch.length);L+=1){const v=c[L],U=a.branch[L];(v==null?void 0:v.data)!==(U==null?void 0:U.data)&&(E=!0),v&&(m={...m,...v.data},E&&(_.props[`data_${O}`]=m),O+=1)}return(!a.url||n.href!==a.url.href||a.error!==u||p!==void 0&&p!==z.form||E)&&(_.props.page={error:u,params:o,route:{id:(f==null?void 0:f.id)??null},status:i,url:new URL(n),form:p??null,data:E?m:z.data}),_}async function ye({loader:n,parent:o,url:c,params:i,route:u,server_data_node:f}){var m,E,O;let p=null;const y={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},_=await n();if((m=_.universal)!=null&&m.load){let D=function(...v){for(const U of v){const{href:j}=new URL(U,c);y.dependencies.add(j)}};const L={route:{get id(){return y.route=!0,u.id}},params:new Proxy(i,{get:(v,U)=>(y.params.add(U),v[U])}),data:(f==null?void 0:f.data)??null,url:Lt(c,()=>{y.url=!0}),async fetch(v,U){let j;v instanceof Request?(j=v.url,U={body:v.method==="GET"||v.method==="HEAD"?void 0:await v.blob(),cache:v.cache,credentials:v.credentials,headers:v.headers,integrity:v.integrity,keepalive:v.keepalive,method:v.method,mode:v.mode,redirect:v.redirect,referrer:v.referrer,referrerPolicy:v.referrerPolicy,signal:v.signal,...U}):j=v;const q=new URL(j,c).href;return D(q),g?$t(j,q,U):Ut(j,U)},setHeaders:()=>{},depends:D,parent(){return y.parent=!0,o()}};p=await _.universal.load.call(null,L)??null,p=p?await Gt(p):null}return{node:_,loader:n,server:f,universal:(E=_.universal)!=null&&E.load?{type:"data",data:p,uses:y}:null,data:p??(f==null?void 0:f.data)??null,slash:((O=_.universal)==null?void 0:O.trailingSlash)??(f==null?void 0:f.slash)}}function Ce(n,o,c,i,u){if(T)return!0;if(!i)return!1;if(i.parent&&n||i.route&&o||i.url&&c)return!0;for(const f of i.params)if(u[f]!==a.params[f])return!0;for(const f of i.dependencies)if(s.some(p=>p(new URL(f))))return!0;return!1}function ve(n,o){return(n==null?void 0:n.type)==="data"?{type:"data",data:n.data,uses:{dependencies:new Set(n.uses.dependencies??[]),params:new Set(n.uses.params??[]),parent:!!n.uses.parent,route:!!n.uses.route,url:!!n.uses.url},slash:n.slash}:(n==null?void 0:n.type)==="skip"?o??null:null}async function qe({id:n,invalidating:o,url:c,params:i,route:u}){if((l==null?void 0:l.id)===n)return l.promise;const{errors:f,layouts:p,leaf:y}=u,_=[...p,y];f.forEach(R=>R==null?void 0:R().catch(()=>{})),_.forEach(R=>R==null?void 0:R[1]().catch(()=>{}));let m=null;const E=a.url?n!==a.url.pathname+a.url.search:!1,O=a.route?u.id!==a.route.id:!1;let D=!1;const L=_.map((R,$)=>{var B;const A=a.branch[$],I=!!(R!=null&&R[0])&&((A==null?void 0:A.loader)!==R[1]||Ce(D,O,E,(B=A.server)==null?void 0:B.uses,i));return I&&(D=!0),I});if(L.some(Boolean)){try{m=await et(c,L)}catch(R){return se({status:500,error:await ae(R,{url:c,params:i,route:{id:u.id}}),url:c,route:u})}if(m.type==="redirect")return m}const v=m==null?void 0:m.nodes;let U=!1;const j=_.map(async(R,$)=>{var be;if(!R)return;const A=a.branch[$],I=v==null?void 0:v[$];if((!I||I.type==="skip")&&R[1]===(A==null?void 0:A.loader)&&!Ce(U,O,E,(be=A.universal)==null?void 0:be.uses,i))return A;if(U=!0,(I==null?void 0:I.type)==="error")throw I;return ye({loader:R[1],url:c,params:i,route:u,parent:async()=>{var ze;const Me={};for(let Ee=0;Ee<$;Ee+=1)Object.assign(Me,(ze=await j[Ee])==null?void 0:ze.data);return Me},server_data_node:ve(I===void 0&&R[0]?{type:"skip"}:I??null,A==null?void 0:A.server)})});for(const R of j)R.catch(()=>{});const q=[];for(let R=0;R<_.length;R+=1)if(_[R])try{q.push(await j[R])}catch($){if($ instanceof Ze)return{type:"redirect",location:$.location};let A=500,I;if(v!=null&&v.includes($))A=$.status??A,I=$.error;else if($ instanceof Ie)A=$.status,I=$.body;else{if(await F.updated.check())return await te(c);I=await ae($,{params:i,url:c,route:{id:u.id}})}const B=await Fe(R,q,f);return B?await ee({url:c,params:i,branch:q.slice(0,B.idx).concat(B.node),status:A,error:I,route:u}):await Je(c,{id:u.id},I,A)}else q.push(void 0);return await ee({url:c,params:i,branch:q,status:200,error:null,route:u,form:o?void 0:null})}async function Fe(n,o,c){for(;n--;)if(c[n]){let i=n;for(;!o[i];)i-=1;try{return{idx:i+1,node:{node:await c[n](),loader:c[n],data:{},server:null,universal:null}}}catch{continue}}}async function se({status:n,error:o,url:c,route:i}){const u={};let f=null;if(at[0]===0)try{const m=await et(c,[!0]);if(m.type!=="data"||m.nodes[0]&&m.nodes[0].type!=="data")throw 0;f=m.nodes[0]??null}catch{(c.origin!==location.origin||c.pathname!==location.pathname||d)&&await te(c)}const y=await ye({loader:nt,url:c,params:u,route:i,parent:()=>Promise.resolve({}),server_data_node:ve(f)}),_={node:await Ue(),loader:Ue,universal:null,server:null,data:null};return await ee({url:c,params:u,branch:[y,_],status:n,error:o,route:null})}function le(n,o){if(We(n,e))return;const c=ce(n);for(const i of Le){const u=i.exec(c);if(u)return{id:n.pathname+n.search,invalidating:o,route:i,params:Rt(u),url:n}}}function ce(n){return kt(n.pathname.slice(e.length)||"/")}function He({url:n,type:o,intent:c,delta:i}){var y,_;let u=!1;const f={from:{params:a.params,route:{id:((y=a.route)==null?void 0:y.id)??null},url:a.url},to:{params:(c==null?void 0:c.params)??null,route:{id:((_=c==null?void 0:c.route)==null?void 0:_.id)??null},url:n},willUnload:!c,type:o};i!==void 0&&(f.delta=i);const p={...f,cancel:()=>{u=!0}};return S||h.before_navigate.forEach(m=>m(p)),u?null:f}async function fe({url:n,scroll:o,keepfocus:c,redirect_chain:i,details:u,type:f,delta:p,nav_token:y,accepted:_,blocked:m}){const E=le(n,!1),O=He({url:n,type:f,delta:p,intent:E});if(!O){m();return}Pe(P),_(),S=!0,g&&F.navigating.set(O),await Ne(E,n,i,{scroll:o,keepfocus:c,details:u},y,()=>{S=!1,h.after_navigate.forEach(D=>D(O)),F.navigating.set(null)})}async function Je(n,o,c,i){return n.origin===location.origin&&n.pathname===location.pathname&&!d?await se({status:i,error:c,url:n,route:o}):await te(n)}function te(n){return location.href=n.href,new Promise(()=>{})}function rt(){let n;t.addEventListener("mousemove",f=>{const p=f.target;clearTimeout(n),n=setTimeout(()=>{i(p,2)},20)});function o(f){i(f.composedPath()[0],1)}t.addEventListener("mousedown",o),t.addEventListener("touchstart",o,{passive:!0});const c=new IntersectionObserver(f=>{for(const p of f)p.isIntersecting&&(ie(ce(new URL(p.target.href))),c.unobserve(p.target))},{threshold:0});function i(f,p){const y=Ge(f,t);if(!y)return;const{url:_,external:m}=Re(y,e);if(m)return;const E=de(y);E.reload||(p<=E.preload_data?xe(_):p<=E.preload_code&&ie(ce(_)))}function u(){c.disconnect();for(const f of t.querySelectorAll("a")){const{url:p,external:y}=Re(f,e);if(y)continue;const _=de(f);_.reload||(_.preload_code===Xe.viewport&&c.observe(f),_.preload_code===Xe.eager&&ie(ce(p)))}}h.after_navigate.push(u),u()}return{after_navigate:n=>{Oe(()=>(h.after_navigate.push(n),()=>{const o=h.after_navigate.indexOf(n);h.after_navigate.splice(o,1)}))},before_navigate:n=>{Oe(()=>(h.before_navigate.push(n),()=>{const o=h.before_navigate.indexOf(n);h.before_navigate.splice(o,1)}))},disable_scroll_handling:()=>{(b||!g)&&(w=!1)},goto:(n,o={})=>we(n,o,[]),invalidate:n=>{if(typeof n=="function")s.push(n);else{const{href:o}=new URL(n,location.href);s.push(c=>c.href===o)}return je()},invalidateAll:()=>(T=!0,je()),preload_data:async n=>{const o=new URL(n,Be(document));await xe(o)},preload_code:ie,apply_action:async n=>{if(n.type==="error"){const o=new URL(location.href),{branch:c,route:i}=a;if(!i)return;const u=await Fe(a.branch.length,c,i.errors);if(u){const f=await ee({url:o,params:a.params,branch:c.slice(0,u.idx).concat(u.node),status:n.status??500,error:n.error,route:i});a=f.state,x.$set(f.props),ue().then(Ae)}}else if(n.type==="redirect")we(n.location,{invalidateAll:!0},[]);else{const o={form:n.data,page:{...z,form:n.data,status:n.status}};x.$set(o),n.type==="success"&&ue().then(Ae)}},_start_router:()=>{var n;history.scrollRestoration="manual",addEventListener("beforeunload",o=>{var i;let c=!1;if(!S){const u={from:{params:a.params,route:{id:((i=a.route)==null?void 0:i.id)??null},url:a.url},to:null,willUnload:!0,type:"leave",cancel:()=>c=!0};h.before_navigate.forEach(f=>f(u))}c?(o.preventDefault(),o.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden"){Pe(P);try{sessionStorage[tt]=JSON.stringify(W)}catch{}}}),(n=navigator.connection)!=null&&n.saveData||rt(),t.addEventListener("click",o=>{if(o.button||o.which!==1||o.metaKey||o.ctrlKey||o.shiftKey||o.altKey||o.defaultPrevented)return;const c=Ge(o.composedPath()[0],t);if(!c)return;const{url:i,external:u,target:f}=Re(c,e);if(!i)return;if(f==="_parent"||f==="_top"){if(window.parent!==window)return}else if(f&&f!=="_self")return;const p=de(c);if(!(c instanceof SVGAElement)&&i.protocol!==location.protocol&&!(i.protocol==="https:"||i.protocol==="http:"))return;if(u||p.reload){He({url:i,type:"link"})||o.preventDefault(),S=!0;return}const[_,m]=i.href.split("#");if(m!==void 0&&_===location.href.split("#")[0]){k=!0,Pe(P),a.url=i,F.page.set({...z,url:i}),F.page.notify();return}fe({url:i,scroll:p.noscroll?ne():null,keepfocus:!1,redirect_chain:[],details:{state:{},replaceState:i.href===location.href},accepted:()=>o.preventDefault(),blocked:()=>o.preventDefault(),type:"link"})}),t.addEventListener("submit",o=>{if(o.defaultPrevented)return;const c=HTMLFormElement.prototype.cloneNode.call(o.target),i=o.submitter;if(((i==null?void 0:i.formMethod)||c.method)!=="get")return;const f=new URL((i==null?void 0:i.hasAttribute("formaction"))&&(i==null?void 0:i.formAction)||c.action);if(We(f,e))return;const p=o.target,{noscroll:y,reload:_}=de(p);if(_)return;o.preventDefault(),o.stopPropagation();const m=new FormData(p),E=i==null?void 0:i.getAttribute("name");E&&m.append(E,(i==null?void 0:i.getAttribute("value"))??""),f.search=new URLSearchParams(m).toString(),fe({url:f,scroll:y?ne():null,keepfocus:!1,redirect_chain:[],details:{state:{},replaceState:!1},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",o=>{var c;if((c=o.state)!=null&&c[N]){if(o.state[N]===P)return;const i=W[o.state[N]];if(a.url.href.split("#")[0]===location.href.split("#")[0]){W[P]=ne(),P=o.state[N],scrollTo(i.x,i.y);return}const u=o.state[N]-P;fe({url:new URL(location.href),scroll:i,keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{P=o.state[N]},blocked:()=>{history.go(-u)},type:"popstate",delta:u})}}),addEventListener("hashchange",()=>{k&&(k=!1,history.replaceState({...history.state,[N]:++P},"",location.href))});for(const o of document.querySelectorAll("link"))o.rel==="icon"&&(o.href=o.href);addEventListener("pageshow",o=>{o.persisted&&F.navigating.set(null)})},_hydrate:async({status:n=200,error:o,node_ids:c,params:i,route:u,data:f,form:p})=>{d=!0;const y=new URL(location.href);({params:i={},route:u={id:null}}=le(y,!1)||{});let _;try{const m=c.map(async(E,O)=>{const D=f[O];return ye({loader:_e[E],url:y,params:i,route:u,parent:async()=>{const L={};for(let v=0;v<O;v+=1)Object.assign(L,(await m[v]).data);return L},server_data_node:ve(D)})});_=await ee({url:y,params:i,branch:await Promise.all(m),status:n,error:o,form:p,route:Le.find(({id:E})=>E===u.id)??null})}catch(m){if(m instanceof Ze){await te(new URL(m.location,location.href));return}_=await se({status:m instanceof Ie?m.status:500,error:await ae(m,{url:y,params:i,route:u}),url:y,route:u})}Ve(_)}}}async function et(r,e){var h;const t=new URL(r);t.pathname=Ot(r.pathname),t.searchParams.append("x-sveltekit-invalidated",e.map(a=>a?"1":"").join("_"));const s=await me(t.href),l=await s.json();if(!s.ok)throw new Error(l);return(h=l.nodes)==null||h.forEach(a=>{(a==null?void 0:a.type)==="data"&&(a.data=bt(a.data),a.uses={dependencies:new Set(a.uses.dependencies??[]),params:new Set(a.uses.params??[]),parent:!!a.uses.parent,route:!!a.uses.route,url:!!a.uses.url})}),l}function ae(r,e){return r instanceof Ie?r.body:Bt.handleError({error:r,event:e})??{message:e.route.id!=null?"Internal Error":"Not Found"}}function Ae(){const r=document.querySelector("[autofocus]");if(r)r.focus();else{const e=document.body,t=e.getAttribute("tabindex");return e.tabIndex=-1,e.focus({preventScroll:!0}),t!==null?e.setAttribute("tabindex",t):e.removeAttribute("tabindex"),new Promise(s=>{setTimeout(()=>{var l;s((l=getSelection())==null?void 0:l.removeAllRanges())})})}}async function ra({env:r,hydrate:e,paths:t,target:s,version:l}){gt(r),wt(t),vt(l);const h=Xt({target:s,base:t.base});yt({client:h}),e?await h._hydrate(e):h.goto(location.href,{replaceState:!0}),h._start_router()}export{ra as start};
